<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><TITLE>vigra - Two-dimensional convolution functions</TITLE>
<link rel=stylesheet type="text/css" href="vigra.css">
<link rel=stylesheet type="text/css" href="vigra_1_8_2.css">
<link rel="shortcut icon" href="vigra-icon.ico" />
</head>
<body  bgcolor="#f8f0e0" link="#0040b0" vlink="#a00040">
<basefont face="Helvetica,Arial,sans-serif" size=3>
<p align=right>
[ <a href="http://hci.iwr.uni-heidelberg.de/vigra/">VIGRA Homepage</a> |
 <a href="functionindex.html">Function Index</a> |
 <a href="classes.html">Class Index</a> |
 <a href="namespaces.html">Namespaces</a> |
 <a href="files.html">File List</a> |
 <a href="index.html">Main Page</a> ]
</p>
<!-- Generated by Doxygen 1.8.3.1 -->
</div><!-- top -->
<div class="contents">
<table class="main_heading">
<tr>
<td align=left>
<A HREF ="#_details" ><IMG BORDER=0 ALT="details" title="Detailed Description" SRC="documents/pfeilGross.gif"></A>
</td>
<td width="100%">Two-dimensional convolution functions
</td>
<td align=right><a href="http://hci.iwr.uni-heidelberg.de/vigra/"><IMG border=0 ALT="VIGRA" SRC="documents/vigra.gif" title="VIGRA Homepage"></a></td></tr>
</table><p>

<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga031f42b01ed7a18b19a91c4742cdd02d"><td class="memTemplParams" colspan="2">template&lt;class SrcIterator , class SrcAccessor , class DestIterator , class DestAccessor , class KernelIterator , class KernelAccessor &gt; </td></tr>
<tr class="memitem:ga031f42b01ed7a18b19a91c4742cdd02d"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__StandardConvolution.html#ga031f42b01ed7a18b19a91c4742cdd02d">convolveImage</a> (SrcIterator src_ul, SrcIterator src_lr, SrcAccessor src_acc, DestIterator dest_ul, DestAccessor dest_acc, KernelIterator ki, KernelAccessor ak, Diff2D kul, Diff2D klr, BorderTreatmentMode border)</td></tr>
<tr class="memdesc:ga031f42b01ed7a18b19a91c4742cdd02d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a 2 dimensional convolution of the source image using the given kernel.  <a href="#ga031f42b01ed7a18b19a91c4742cdd02d">More...</a><br/></td></tr>
<tr class="separator:ga031f42b01ed7a18b19a91c4742cdd02d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa1698618c44d0d5d5e0559212519b562"><td class="memTemplParams" colspan="2">template&lt;... &gt; </td></tr>
<tr class="memitem:gaa1698618c44d0d5d5e0559212519b562"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__StandardConvolution.html#gaa1698618c44d0d5d5e0559212519b562">convolveImageWithMask</a> (...)</td></tr>
<tr class="memdesc:gaa1698618c44d0d5d5e0559212519b562"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deprecated name of 2-dimensional normalized convolution, i.e. convolution with a mask image.  <a href="#gaa1698618c44d0d5d5e0559212519b562">More...</a><br/></td></tr>
<tr class="separator:gaa1698618c44d0d5d5e0559212519b562"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga69ac94967f6044203ebb85d84cc51b84"><td class="memTemplParams" colspan="2">template&lt;... &gt; </td></tr>
<tr class="memitem:ga69ac94967f6044203ebb85d84cc51b84"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__StandardConvolution.html#ga69ac94967f6044203ebb85d84cc51b84">normalizedConvolveImage</a> (...)</td></tr>
<tr class="memdesc:ga69ac94967f6044203ebb85d84cc51b84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a 2-dimensional normalized convolution, i.e. convolution with a mask image.  <a href="#ga69ac94967f6044203ebb85d84cc51b84">More...</a><br/></td></tr>
<tr class="separator:ga69ac94967f6044203ebb85d84cc51b84"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="_details" id="details"></a><h2 class="details_section">Detailed Description</h2>
<p>Perform 2D non-separable convolution, with and without ROI mask.</p>
<p>These generic convolution functions implement the standard 2D convolution operation for images that fit into the required interface. Arbitrary ROI's are supported by the mask version of the algorithm. The functions need a suitable 2D kernel to operate. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga031f42b01ed7a18b19a91c4742cdd02d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vigra::convolveImage </td>
          <td>(</td>
          <td class="paramtype">SrcIterator&#160;</td>
          <td class="paramname"><em>src_ul</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SrcIterator&#160;</td>
          <td class="paramname"><em>src_lr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SrcAccessor&#160;</td>
          <td class="paramname"><em>src_acc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DestIterator&#160;</td>
          <td class="paramname"><em>dest_ul</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DestAccessor&#160;</td>
          <td class="paramname"><em>dest_acc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KernelIterator&#160;</td>
          <td class="paramname"><em>ki</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KernelAccessor&#160;</td>
          <td class="paramname"><em>ak</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Diff2D&#160;</td>
          <td class="paramname"><em>kul</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Diff2D&#160;</td>
          <td class="paramname"><em>klr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BorderTreatmentMode&#160;</td>
          <td class="paramname"><em>border</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a 2 dimensional convolution of the source image using the given kernel. </p>
<p>The KernelIterator must point to the center of the kernel, and the kernel's size is given by its upper left (x and y of distance &lt;= 0) and lower right (distance &gt;= 0) corners. The image must always be larger than the kernel. At those positions where the kernel does not completely fit into the image, the specified <a class="el" href="BorderTreatmentMode.html">BorderTreatmentMode</a> is applied. You can choice between following BorderTreatmentModes: </p>
<ul>
<li>
BORDER_TREATMENT_CLIP </li>
<li>
BORDER_TREATMENT_AVOID </li>
<li>
BORDER_TREATMENT_WRAP </li>
<li>
BORDER_TREATMENT_REFLECT </li>
<li>
BORDER_TREATMENT_REPEAT </li>
</ul>
<p><br/>
 The images's pixel type (SrcAccessor::value_type) must be a linear space over the kernel's value_type (KernelAccessor::value_type), i.e. addition of source values, multiplication with kernel values, and NumericTraits must be defined. The kernel's value_type must be an algebraic field, i.e. the arithmetic operations (+, -, *, /) and NumericTraits must be defined.</p>
<p><b> Declarations:</b></p>
<p>pass 2D array views: </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>T1, <span class="keyword">class </span>S1,</div>
<div class="line">              <span class="keyword">class </span>T2, <span class="keyword">class </span>S2,</div>
<div class="line">              <span class="keyword">class </span>T3&gt;</div>
<div class="line">    <span class="keywordtype">void</span></div>
<div class="line">    <a class="code" href="group__CommonConvolutionFilters.html#ga90659f4fa8421e82e3082f65e1ca23c2" title="Convolve an image with the given kernel(s).">convolveImage</a>(MultiArrayView&lt;2, T1, S1&gt; <span class="keyword">const</span> &amp; src,</div>
<div class="line">                  MultiArrayView&lt;2, T2, S2&gt; dest,</div>
<div class="line">                  Kernel2D&lt;T3&gt; <span class="keyword">const</span> &amp; kernel);</div>
<div class="line">}</div>
</div><!-- fragment --><p>pass <a class="el" href="group__ImageIterators.html">Image Iterators</a> and <a class="el" href="group__DataAccessors.html">Data Accessors</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>KernelIterator, <span class="keyword">class </span>KernelAccessor&gt;</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code" href="group__CommonConvolutionFilters.html#ga90659f4fa8421e82e3082f65e1ca23c2" title="Convolve an image with the given kernel(s).">convolveImage</a>(SrcIterator src_ul, SrcIterator src_lr, SrcAccessor src_acc,</div>
<div class="line">                       DestIterator dest_ul, DestAccessor dest_acc,</div>
<div class="line">                       KernelIterator ki, KernelAccessor ak,</div>
<div class="line">                       Diff2D kul, Diff2D klr, BorderTreatmentMode border);</div>
<div class="line">}</div>
</div><!-- fragment --><p>use argument objects in conjunction with <a class="el" href="ArgumentObjectFactories.html">Argument Object Factories</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>KernelIterator, <span class="keyword">class </span>KernelAccessor&gt;</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code" href="group__CommonConvolutionFilters.html#ga90659f4fa8421e82e3082f65e1ca23c2" title="Convolve an image with the given kernel(s).">convolveImage</a>(triple&lt;SrcIterator, SrcIterator, SrcAccessor&gt; src,</div>
<div class="line">                       pair&lt;DestIterator, DestAccessor&gt; dest,</div>
<div class="line">                       tuple5&lt;KernelIterator, KernelAccessor, Diff2D, Diff2D,</div>
<div class="line">                       BorderTreatmentMode&gt; kernel);</div>
<div class="line">}</div>
</div><!-- fragment --><p><b> Usage:</b></p>
<p><b>#include</b> &lt;<a class="el" href="stdconvolution_8hxx_source.html">vigra/stdconvolution.hxx</a>&gt;<br/>
 Namespace: vigra</p>
<div class="fragment"><div class="line"><a class="code" href="classvigra_1_1BasicImage.html" title="Fundamental class template for images.">vigra::FImage</a> src(w,h), dest(w,h);</div>
<div class="line">...</div>
<div class="line"></div>
<div class="line"><span class="comment">// define horizontal Sobel filter</span></div>
<div class="line">vigra::Kernel2D&lt;<span class="keywordtype">float</span>&gt; sobel;</div>
<div class="line"></div>
<div class="line">sobel.initExplicitly(Diff2D(-1,-1), Diff2D(1,1)) =  <span class="comment">// upper left and lower right</span></div>
<div class="line">                     0.125, 0.0, -0.125,</div>
<div class="line">                     0.25,  0.0, -0.25,</div>
<div class="line">                     0.125, 0.0, -0.125;</div>
<div class="line">sobel.setBorderTreatment(vigra::BORDER_TREATMENT_REFLECT);</div>
<div class="line"></div>
<div class="line"><a class="code" href="group__CommonConvolutionFilters.html#ga90659f4fa8421e82e3082f65e1ca23c2" title="Convolve an image with the given kernel(s).">vigra::convolveImage</a>(srcImageRange(src), destImage(dest), kernel2d(sobel));</div>
</div><!-- fragment --><p><b> Required Interface:</b></p>
<div class="fragment"><div class="line">ImageIterator src_ul, src_lr;</div>
<div class="line">ImageIterator dest_ul;</div>
<div class="line">ImageIterator ik;</div>
<div class="line"></div>
<div class="line">SrcAccessor src_accessor;</div>
<div class="line">DestAccessor dest_accessor;</div>
<div class="line">KernelAccessor kernel_accessor;</div>
<div class="line"></div>
<div class="line">NumericTraits&lt;SrcAccessor::value_type&gt;::RealPromote s = src_accessor(src_ul);</div>
<div class="line"></div>
<div class="line">s = s + s;</div>
<div class="line">s = kernel_accessor(ik) * s;</div>
<div class="line">s -= s;</div>
<div class="line"></div>
<div class="line">dest_accessor.set(</div>
<div class="line">NumericTraits&lt;DestAccessor::value_type&gt;::fromRealPromote(s), dest_ul);</div>
<div class="line"></div>
<div class="line">NumericTraits&lt;KernelAccessor::value_type&gt;::RealPromote k = kernel_accessor(ik);</div>
<div class="line"></div>
<div class="line">k += k;</div>
<div class="line">k -= k;</div>
<div class="line">k = k / k;</div>
</div><!-- fragment --><p><b> Preconditions:</b></p>
<div class="fragment"><div class="line">kul.x &lt;= 0</div>
<div class="line">kul.y &lt;= 0</div>
<div class="line">klr.x &gt;= 0</div>
<div class="line">klr.y &gt;= 0</div>
<div class="line">src_lr.x - src_ul.x &gt;= klr.x + kul.x + 1</div>
<div class="line">src_lr.y - src_ul.y &gt;= klr.y + kul.y + 1</div>
</div><!-- fragment --><p>If border == BORDER_TREATMENT_CLIP: Sum of kernel elements must be != 0. </p>

</div>
</div>
<a class="anchor" id="ga69ac94967f6044203ebb85d84cc51b84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vigra::normalizedConvolveImage </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a 2-dimensional normalized convolution, i.e. convolution with a mask image. </p>
<p>This functions computes <a href="http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/PIRODDI1/NormConv/NormConv.html">normalized convolution</a> as defined in Knutsson, H. and Westin, C-F.: <em>Normalized and differential convolution: Methods for Interpolation and Filtering of incomplete and uncertain data</em>. Proc. of the IEEE Conf. on Computer Vision and Pattern Recognition, 1993, 515-523.</p>
<p>The mask image must be binary and encodes which pixels of the original image are valid. It is used as follows: Only pixel under the mask are used in the calculations. Whenever a part of the kernel lies outside the mask, it is ignored, and the kernel is renormalized to its original norm (analogous to the CLIP <a class="el" href="BorderTreatmentMode.html">BorderTreatmentMode</a>). Thus, a useful convolution result is computed whenever <em>at least one valid pixel is within the current window</em> Thus, destination pixels not under the mask still receive a value if they are <em>near</em> the mask. Therefore, this algorithm is useful as an interpolator of sparse input data. If you are only interested in the destination values under the mask, you can perform a subsequent <a class="el" href="group__CopyAlgo.html#ga6ff922dacba428e319cb0ae2ebbfedd0">copyImageIf()</a>.</p>
<p>The KernelIterator must point to the center of the kernel, and the kernel's size is given by its upper left (x and y of distance &lt;= 0) and lower right (distance &gt;= 0) corners. The image must always be larger than the kernel. At those positions where the kernel does not completely fit into the image, the specified <a class="el" href="BorderTreatmentMode.html">BorderTreatmentMode</a> is applied. Only BORDER_TREATMENT_CLIP and BORDER_TREATMENT_AVOID are currently supported.</p>
<p>The images's pixel type (SrcAccessor::value_type) must be a linear space over the kernel's value_type (KernelAccessor::value_type), i.e. addition of source values, multiplication with kernel values, and NumericTraits must be defined. The kernel's value_type must be an algebraic field, i.e. the arithmetic operations (+, -, *, /) and NumericTraits must be defined.</p>
<p><b> Declarations:</b></p>
<p>pass 2D array views: </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>T1, <span class="keyword">class </span>S1,</div>
<div class="line">              <span class="keyword">class </span>T2, <span class="keyword">class </span>S2,</div>
<div class="line">              <span class="keyword">class </span>TM, <span class="keyword">class </span>SM,</div>
<div class="line">              <span class="keyword">class </span>T3&gt;</div>
<div class="line">    <span class="keywordtype">void</span></div>
<div class="line">    <a class="code" href="group__StandardConvolution.html#ga69ac94967f6044203ebb85d84cc51b84" title="Performs a 2-dimensional normalized convolution, i.e. convolution with a mask image.">normalizedConvolveImage</a>(MultiArrayView&lt;2, T1, S1&gt; <span class="keyword">const</span> &amp; src,</div>
<div class="line">                            MultiArrayView&lt;2, TM, SM&gt; <span class="keyword">const</span> &amp; mask,</div>
<div class="line">                            MultiArrayView&lt;2, T2, S2&gt; dest,</div>
<div class="line">                            Kernel2D&lt;T3&gt; <span class="keyword">const</span> &amp; kernel);</div>
<div class="line">}</div>
</div><!-- fragment --><p>pass <a class="el" href="group__ImageIterators.html">Image Iterators</a> and <a class="el" href="group__DataAccessors.html">Data Accessors</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>MaskIterator, <span class="keyword">class </span>MaskAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>KernelIterator, <span class="keyword">class </span>KernelAccessor&gt;</div>
<div class="line">    <span class="keywordtype">void</span></div>
<div class="line">    <a class="code" href="group__StandardConvolution.html#ga69ac94967f6044203ebb85d84cc51b84" title="Performs a 2-dimensional normalized convolution, i.e. convolution with a mask image.">normalizedConvolveImage</a>(SrcIterator src_ul, SrcIterator src_lr, SrcAccessor src_acc,</div>
<div class="line">                            MaskIterator <a class="code" href="group__FixedPointOperations.html#ga71573012351636ef982341cf3eb1d669" title="multiplication with enforced result type.">mul</a>, MaskAccessor am,</div>
<div class="line">                            DestIterator dest_ul, DestAccessor dest_acc,</div>
<div class="line">                            KernelIterator ki, KernelAccessor ak,</div>
<div class="line">                            Diff2D kul, Diff2D klr, BorderTreatmentMode border);</div>
<div class="line">}</div>
</div><!-- fragment --><p>use argument objects in conjunction with <a class="el" href="ArgumentObjectFactories.html">Argument Object Factories</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>MaskIterator, <span class="keyword">class </span>MaskAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>KernelIterator, <span class="keyword">class </span>KernelAccessor&gt;</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code" href="group__StandardConvolution.html#ga69ac94967f6044203ebb85d84cc51b84" title="Performs a 2-dimensional normalized convolution, i.e. convolution with a mask image.">normalizedConvolveImage</a>(triple&lt;SrcIterator, SrcIterator, SrcAccessor&gt; src,</div>
<div class="line">                                 pair&lt;MaskIterator, MaskAccessor&gt; mask,</div>
<div class="line">                                 pair&lt;DestIterator, DestAccessor&gt; dest,</div>
<div class="line">                                 tuple5&lt;KernelIterator, KernelAccessor, Diff2D, Diff2D,</div>
<div class="line">                                 BorderTreatmentMode&gt; kernel);</div>
<div class="line">}</div>
</div><!-- fragment --><p><b> Usage:</b></p>
<p><b>#include</b> &lt;<a class="el" href="stdconvolution_8hxx_source.html">vigra/stdconvolution.hxx</a>&gt;<br/>
 Namespace: vigra</p>
<div class="fragment"><div class="line"><a class="code" href="classvigra_1_1BasicImage.html" title="Fundamental class template for images.">vigra::FImage</a> src(w,h), dest(w,h);</div>
<div class="line">vigra::CImage mask(w,h);</div>
<div class="line">...</div>
<div class="line"></div>
<div class="line"><span class="comment">// define 3x3 binomial filter</span></div>
<div class="line">vigra::Kernel2D&lt;<span class="keywordtype">float</span>&gt; binom;</div>
<div class="line"></div>
<div class="line">binom.initExplicitly(Diff2D(-1,-1), Diff2D(1,1)) =   <span class="comment">// upper left and lower right</span></div>
<div class="line">                     0.0625, 0.125, 0.0625,</div>
<div class="line">                     0.125,  0.25,  0.125,</div>
<div class="line">                     0.0625, 0.125, 0.0625;</div>
<div class="line"></div>
<div class="line"><a class="code" href="group__StandardConvolution.html#ga69ac94967f6044203ebb85d84cc51b84" title="Performs a 2-dimensional normalized convolution, i.e. convolution with a mask image.">vigra::normalizedConvolveImage</a>(srcImageRange(src), maskImage(mask), destImage(dest), kernel2d(binom));</div>
</div><!-- fragment --><p><b> Required Interface:</b></p>
<div class="fragment"><div class="line">ImageIterator src_ul, src_lr;</div>
<div class="line">ImageIterator <a class="code" href="group__FixedPointOperations.html#ga71573012351636ef982341cf3eb1d669" title="multiplication with enforced result type.">mul</a>;</div>
<div class="line">ImageIterator dest_ul;</div>
<div class="line">ImageIterator ik;</div>
<div class="line"></div>
<div class="line">SrcAccessor src_accessor;</div>
<div class="line">MaskAccessor mask_accessor;</div>
<div class="line">DestAccessor dest_accessor;</div>
<div class="line">KernelAccessor kernel_accessor;</div>
<div class="line"></div>
<div class="line">NumericTraits&lt;SrcAccessor::value_type&gt;::RealPromote s = src_accessor(src_ul);</div>
<div class="line"></div>
<div class="line">s = s + s;</div>
<div class="line">s = kernel_accessor(ik) * s;</div>
<div class="line">s -= s;</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">if</span>(mask_accessor(mul)) ...;</div>
<div class="line"></div>
<div class="line">dest_accessor.set(</div>
<div class="line">NumericTraits&lt;DestAccessor::value_type&gt;::fromRealPromote(s), dest_ul);</div>
<div class="line"></div>
<div class="line">NumericTraits&lt;KernelAccessor::value_type&gt;::RealPromote k = kernel_accessor(ik);</div>
<div class="line"></div>
<div class="line">k += k;</div>
<div class="line">k -= k;</div>
<div class="line">k = k / k;</div>
</div><!-- fragment --><p><b> Preconditions:</b></p>
<div class="fragment"><div class="line">kul.x &lt;= 0</div>
<div class="line">kul.y &lt;= 0</div>
<div class="line">klr.x &gt;= 0</div>
<div class="line">klr.y &gt;= 0</div>
<div class="line">src_lr.x - src_ul.x &gt;= klr.x + kul.x + 1</div>
<div class="line">src_lr.y - src_ul.y &gt;= klr.y + kul.y + 1</div>
<div class="line">border == BORDER_TREATMENT_CLIP || border == BORDER_TREATMENT_AVOID</div>
</div><!-- fragment --><p>Sum of kernel elements must be != 0. </p>

</div>
</div>
<a class="anchor" id="gaa1698618c44d0d5d5e0559212519b562"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vigra::convolveImageWithMask </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deprecated name of 2-dimensional normalized convolution, i.e. convolution with a mask image. </p>
<p>See <a class="el" href="group__StandardConvolution.html#ga69ac94967f6044203ebb85d84cc51b84">normalizedConvolveImage()</a> for documentation.</p>
<p><b> Declarations:</b></p>
<p>pass 2D array views: </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>MaskIterator, <span class="keyword">class </span>MaskAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>KernelIterator, <span class="keyword">class </span>KernelAccessor&gt;</div>
<div class="line">    <span class="keywordtype">void</span></div>
<div class="line">    <a class="code" href="group__StandardConvolution.html#gaa1698618c44d0d5d5e0559212519b562" title="Deprecated name of 2-dimensional normalized convolution, i.e. convolution with a mask image...">convolveImageWithMask</a>(SrcIterator src_ul, SrcIterator src_lr, SrcAccessor src_acc,</div>
<div class="line">                          MaskIterator mul, MaskAccessor am,</div>
<div class="line">                          DestIterator dest_ul, DestAccessor dest_acc,</div>
<div class="line">                          KernelIterator ki, KernelAccessor ak,</div>
<div class="line">                          Diff2D kul, Diff2D klr, BorderTreatmentMode border);</div>
<div class="line">}</div>
</div><!-- fragment --><p>pass <a class="el" href="group__ImageIterators.html">Image Iterators</a> and <a class="el" href="group__DataAccessors.html">Data Accessors</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>MaskIterator, <span class="keyword">class </span>MaskAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>KernelIterator, <span class="keyword">class </span>KernelAccessor&gt;</div>
<div class="line">    <span class="keywordtype">void</span></div>
<div class="line">    <a class="code" href="group__StandardConvolution.html#gaa1698618c44d0d5d5e0559212519b562" title="Deprecated name of 2-dimensional normalized convolution, i.e. convolution with a mask image...">convolveImageWithMask</a>(SrcIterator src_ul, SrcIterator src_lr, SrcAccessor src_acc,</div>
<div class="line">                          MaskIterator mul, MaskAccessor am,</div>
<div class="line">                          DestIterator dest_ul, DestAccessor dest_acc,</div>
<div class="line">                          KernelIterator ki, KernelAccessor ak,</div>
<div class="line">                          Diff2D kul, Diff2D klr, BorderTreatmentMode border);</div>
<div class="line">}</div>
</div><!-- fragment --><p>use argument objects in conjunction with <a class="el" href="ArgumentObjectFactories.html">Argument Object Factories</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>MaskIterator, <span class="keyword">class </span>MaskAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>KernelIterator, <span class="keyword">class </span>KernelAccessor&gt;</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code" href="group__StandardConvolution.html#gaa1698618c44d0d5d5e0559212519b562" title="Deprecated name of 2-dimensional normalized convolution, i.e. convolution with a mask image...">convolveImageWithMask</a>(triple&lt;SrcIterator, SrcIterator, SrcAccessor&gt; src,</div>
<div class="line">                               pair&lt;MaskIterator, MaskAccessor&gt; mask,</div>
<div class="line">                               pair&lt;DestIterator, DestAccessor&gt; dest,</div>
<div class="line">                               tuple5&lt;KernelIterator, KernelAccessor, Diff2D, Diff2D,</div>
<div class="line">                               BorderTreatmentMode&gt; kernel);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
<!-- footer.html -->
<p>
<table border=0 cellspacing=0 width="100%"  bgcolor="#e0d0a0" cellpadding=5>
<tr>
<td>
<p>
<i>&copy; <A HREF="http://hci.iwr.uni-heidelberg.de/people/ukoethe/">Ullrich K&ouml;the</A>     (<A
HREF="mailto:ullrich.koethe@iwr.uni-heidelberg.de">ullrich.koethe@iwr.uni-heidelberg.de</A>)</i> <br>
<i><A HREF="http://hci.iwr.uni-heidelberg.de/">
Heidelberg Collaboratory for Image Processing</a>,
University of Heidelberg, Germany</i>
<td>
<p align=right>
<I>html generated using <A HREF="http://www.doxygen.org">doxygen</A> and <A HREF="http://www.python.org">Python</A></I>
<br>
<i>
vigra 1.9.1 (Mon Jun 3 2013)
</i>
</tr>
</table>
</BODY>
</HTML>
